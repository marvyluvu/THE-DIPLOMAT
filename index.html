<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BAKIS MUN // ACCESS NODE</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: #00ff99;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      overflow: hidden;
    }

    .scanlines::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      background-image: repeating-linear-gradient(
        to bottom,
        rgba(0, 255, 153, 0.05) 0px,
        rgba(0, 255, 153, 0.05) 1px,
        transparent 1px,
        transparent 2px
      );
      z-index: 2;
      animation: flicker 0.2s infinite;
    }

    @keyframes flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.95; }
    }

    .terminal {
      padding: 2rem;
      position: relative;
      z-index: 1;
    }

    .output {
      white-space: pre-line;
      margin-bottom: 1rem;
    }

    .input-line {
      display: flex;
      align-items: center;
    }

    .blinker {
      width: 10px;
      height: 20px;
      background: #00ff99;
      animation: blink 1s step-end infinite;
      margin-left: 4px;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    .glitch {
      color: #00ff99;
      text-shadow: 0 0 5px #00ff99, 0 0 10px #00ff99;
      animation: glitch 0.5s steps(2, start) infinite;
    }

    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(2px, -2px); }
      60% { transform: translate(-2px, -2px); }
      80% { transform: translate(2px, 2px); }
      100% { transform: translate(0); }
    }

    .failing {
      animation: breakdown 0.2s steps(2, end) infinite;
      color: #ff3333;
    }

    @keyframes breakdown {
      0% { opacity: 1; text-shadow: 0 0 1px #ff3333; }
      50% { opacity: 0.4; text-shadow: 0 0 10px #ff0000; }
      100% { opacity: 1; text-shadow: 0 0 1px #ff3333; }
    }

    .hidden-clue {
      opacity: 0.1;
      transition: 0.3s;
      cursor: help;
    }

    .hidden-clue:hover {
      opacity: 1;
    }
  </style>
</head>
<body class="scanlines">
  <audio id="accessSound" src="https://files.catbox.moe/nul41q.mp3" preload="auto"></audio>
  <div class="terminal">
    <div id="output" class="output"></div>
    <div class="input-line">
      <span>&gt;</span>
      <input type="text" id="userInput" autocomplete="off" autofocus style="background:transparent; border:none; color:#00ff99; font-family:'Courier New', monospace; font-size:16px; width:60%; outline: none;"/>
      <span class="blinker"></span>
    </div>
    <div class="hidden-clue">// hint: they told you to seek...</div>
  </div>

  <script>
    const output = document.getElementById('output');
    const input = document.getElementById('userInput');
    const accessSound = document.getElementById('accessSound');

    const binaryChallenge = "01000100 01001001 01010000 01001100 01001111 01001101 01000001 01000011 01011001";
    let step = 0;
    let userChoice = '';

    function typeText(text, delay = 50, callback) {
      let i = 0;
      const interval = setInterval(() => {
        output.innerHTML += text.charAt(i);
        i++;
        if (i >= text.length) {
          clearInterval(interval);
          output.innerHTML += "\n";
          if (callback) callback();
        }
      }, delay);
    }

    function bootSequence() {
      typeText("BOOTING NODE...\n", 30, () => {
        typeText("ESTABLISHING SECURE DIPLOMATIC CHANNEL...\n", 30, () => {
          typeText("RECEIVED ENCRYPTED TRANSMISSION:\n\n", 30, () => {
            typeText(binaryChallenge + "\n\n> TRANSLATE BINARY:", 40);
          });
        });
      });
    }

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const value = input.value.trim().toLowerCase();
        output.innerHTML += `\n> ${value}\n`;
        input.value = '';

        if (step === 0) {
          if (value === 'diplomacy') {
            step++;
            accessSound.play();
            output.innerHTML += "\n<span class='glitch'>[ ACCESS GRANTED ]</span>\n";
            setTimeout(() => {
              output.innerHTML += "\nWelcome, delegate.\nChoose your path:\n[1] Uphold the truth\n[2] Conceal the evidence\n\nEnter your decision:";
            }, 1000);
          } else {
            output.innerHTML += "\n<span class='glitch'>[ ACCESS DENIED ]</span>\nInvalid transmission. Try again.\n";
          }
        } else if (step === 1) {
          if (value === '1' || value === '2') {
            userChoice = value;
            step++;
            output.innerHTML += `\nYour decision has been encoded.\nProcessing internal protocols...\n`;
            setTimeout(() => {
              output.innerHTML += "\n---\n<span class='failing'>MAINFRAME ERROR 0xA7FF</span>\n<span class='failing'>DATA CORRUPTION DETECTED</span>\n<span class='failing'>ATTEMPTING REPAIR...</span>\n---\n";
              setTimeout(() => {
                output.innerHTML += "\nOne final prompt:\n\n";
                output.innerHTML += "'The one who speaks most clearly... may still be hiding the most.'\nWhat is your conclusion in one word?";
              }, 2500);
            }, 1500);
          } else {
            output.innerHTML += "\nUnrecognized input. Choose 1 or 2.\n";
          }
        } else if (step === 2) {
          output.innerHTML += `\nFinal entry recorded.\nAnalyzing input integrity...\n`;
          setTimeout(() => {
            output.innerHTML += (userChoice === '1')
              ? "\nOutcome: You chose transparency. Diplomacy persists through truth.\n"
              : "\nOutcome: You chose silence. Some secrets fuel power.\n";
            output.innerHTML += "\n<span class='failing'>Authorization Token: BAKIS.EXE//C0RRUPTED</span>\n<span class='failing'>System instability critical. This node will self-terminate.\n\n</span>";
            input.disabled = true;
          }, 2000);
        }
      }
    });

    bootSequence();
  </script>
</body>
</html>
